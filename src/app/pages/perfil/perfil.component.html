<section class="perfil">
  <!-- Header de perfil -->
  <div class="card info-card">
    <div class="info-grid">
      <div class="kvs">
        <!-- Nombre + Apellido -->
        <div class="kv">
          <span class="k">Nombre</span>
          <span class="v" *ngIf="!editMode">{{ nombreCompleto }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              [(ngModel)]="editable.nombre"
              placeholder="Nombre"
            />
            <input
              class="inline-input"
              [(ngModel)]="editable.apellido"
              placeholder="Apellido"
            />
          </span>
        </div>

        <!-- Carrera -->
        <div class="kv">
          <span class="k">Carrera/s en curso</span>
          <span class="v" *ngIf="!editMode">{{ editable.carrera }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              [(ngModel)]="editable.carrera"
              placeholder="Carrera"
            />
          </span>
        </div>

        <!-- Semestre -->
        <div class="kv">
          <span class="k">Semestre máximo</span>
          <span class="v" *ngIf="!editMode">{{ semestreLabel }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              type="number"
              min="1"
              [(ngModel)]="editable.semestre"
            />
          </span>
        </div>

        <!-- Teléfono -->
        <div class="kv">
          <span class="k">Teléfono</span>
          <span class="v" *ngIf="!editMode">{{ editable.telefono }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              [(ngModel)]="editable.telefono"
              placeholder="Teléfono"
            />
          </span>
        </div>

        <!-- Roles (solo lectura, no se edita) -->
        <div class="kv">
          <span class="k">Roles</span>
          <span class="v">{{ rolPrincipal }}</span>
        </div>

        <!-- Email -->
        <div class="kv">
          <span class="k">Email</span>
          <span class="v" *ngIf="!editMode">{{ editable.email }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              [(ngModel)]="editable.email"
              placeholder="Email"
            />
          </span>
        </div>

        <!-- Ubicación (si querés mostrarla / editarla) -->
        <div class="kv">
          <span class="k">Ubicación</span>
          <span class="v" *ngIf="!editMode">{{ editable.ubicacion }}</span>
          <span class="v v-edit" *ngIf="editMode">
            <input
              class="inline-input"
              [(ngModel)]="editable.ubicacion"
              placeholder="Ubicación"
            />
          </span>
        </div>
      </div>
    </div>

    <!-- Botones editar / guardar / cancelar -->
    <div class="info-actions">
      <button
        class="btn btn-sm edit"
        *ngIf="!editMode"
        (click)="editarPerfil()"
        title="Editar"
      >
        Editar ✎
      </button>

      <ng-container *ngIf="editMode">
        <button
          class="btn btn-sm primary"
          [disabled]="saving"
          (click)="guardarPerfil()"
        >
          {{ saving ? "Guardando..." : "Guardar" }}
        </button>
        <button class="btn btn-sm ghost" (click)="cancelarEdicion()">
          Cancelar
        </button>
      </ng-container>
    </div>

    <p class="msg ok" *ngIf="saveMsg">{{ saveMsg }}</p>
    <p class="msg error" *ngIf="errorMsg">{{ errorMsg }}</p>
  </div>

  <!-- Grid principal: certificados / experiencias / sobre mí -->
  <div class="grid-3">
    <!-- Certificados -->
    <section class="card panel">
      <header class="panel-header">
        <h2>Certificados</h2>
      </header>

      <ul class="cert-list">
        <li class="cert-item" *ngFor="let c of certificados">
          <div class="cert-left">
            <strong>{{ c.titulo }}</strong>
            <small>{{ c.anio }} · {{ c.horas }}hrs</small>
          </div>
          <div class="cert-right">
            <button class="link" (click)="verCertificado(c)">
              Ver detalles
            </button>
            <span class="chev">›</span>
          </div>
        </li>
      </ul>
    </section>

    <!-- Experiencias -->
    <section class="card panel">
      <header class="panel-header center">
        <h2>Experiencias</h2>
        <div class="cols-head">
          <span>Experiencia · Duración</span>
          <span>Habilidades aprendidas</span>
          <span>Herramientas</span>
        </div>
      </header>

      <div class="exp-list">
        <article class="exp-row" *ngFor="let e of experiencias">
          <div class="exp-col exp-main">
            <strong>{{ e.cargo }}</strong>
            <small>{{ e.desde }} – {{ e.hasta }}</small>
          </div>
          <div class="exp-col exp-skills">
            <span class="pill" *ngFor="let h of e.habilidades">{{ h }}</span>
          </div>
          <div class="exp-col exp-tech">
            <span class="tag" *ngFor="let t of e.tech">{{ t }}</span>
          </div>
        </article>
      </div>
    </section>

    <!-- Sobre mí -->
    <aside class="card panel">
      <header class="panel-header">
        <h2>Sobre mí</h2>
      </header>
      <div class="about">
        <p *ngFor="let p of sobreMi">{{ p }}</p>
      </div>
    </aside>
  </div>
</section>
