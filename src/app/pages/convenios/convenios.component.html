<section class="channels">
  <!-- Filtros -->
  <aside class="filters card">
    <h2 class="filters-title">Canales</h2>

    <div class="search">
      <span class="icon">ðŸ”Ž</span>
      <input
        type="text"
        [(ngModel)]="search"
        placeholder="Buscar por nombre, tipo o descripciÃ³n..."
        aria-label="Buscar canal"
      />
    </div>

    <div class="filters-group">
      <p class="filters-subtitle">Tipo de canal</p>
      <button
        class="filters-kind"
        [class.active]="selectedTipo === null"
        (click)="setTipo(null)"
      >
        Todos
      </button>

      <button
        class="filters-kind"
        *ngFor="let t of tipos"
        [class.active]="isTipoSelected(t)"
        (click)="setTipo(t)"
      >
        {{ t }}
      </button>
    </div>
  </aside>

  <!-- Contenido principal -->
  <section class="content card">
    <header class="content-header">
      <h1>CANALES</h1>
    </header>

    <p *ngIf="loading">Cargando canales...</p>
    <p class="error" *ngIf="!loading && errorMsg">{{ errorMsg }}</p>

    <ng-container *ngIf="!loading && !errorMsg">
      <!-- Tus canales -->
      <section *ngIf="followedList.length" class="section-block">
        <h2 class="section-title">Tus canales</h2>
        <div class="grid">
          <article class="channel-card followed" *ngFor="let c of followedList">
            <header class="card-header">
              <span class="pill tipo">{{ c.tipo }}</span>
              <h3>{{ c.nombre }}</h3>
            </header>
            <p class="desc">{{ c.descripcion }}</p>
            <p class="slug">/{{ c.slug }}</p>
            <button class="btn-sm ghost" disabled>Siguiendo</button>
          </article>
        </div>
      </section>

      <!-- Otros canales -->
      <section class="section-block">
        <h2 class="section-title">
          {{ followedList.length ? "Otros canales" : "Canales disponibles" }}
        </h2>
        <div class="grid">
          <article class="channel-card" *ngFor="let c of otherList">
            <header class="card-header">
              <span class="pill tipo">{{ c.tipo }}</span>
              <h3>{{ c.nombre }}</h3>
            </header>
            <p class="desc">{{ c.descripcion }}</p>
            <p class="slug">/{{ c.slug }}</p>
            <button
              class="btn-sm primary"
              [disabled]="!puedeSeguir(c)"
              (click)="seguir(c)"
            >
              {{ followingIds.has(c.id) ? "Siguiendo..." : "Seguir canal" }}
            </button>
          </article>
        </div>

        <p class="empty" *ngIf="!otherList.length && !followedList.length">
          No hay canales para mostrar con los filtros actuales.
        </p>
      </section>
    </ng-container>
  </section>
</section>
